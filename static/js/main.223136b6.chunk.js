(this["webpackJsonpmoje-doklady-online"]=this["webpackJsonpmoje-doklady-online"]||[]).push([[0],{119:function(e,t,r){},138:function(e,t,r){},168:function(e,t,r){},170:function(e,t,r){},171:function(e,t,r){},172:function(e,t,r){},173:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(38),s=r.n(c),o=(r(138),r(19)),i=r(22),l=r(16),d=r.n(l),j=r(26),u=r(8),b=r(21),h=r(15),m=r(12),O=r(183),f=r(178),x=r(127),p=r(1),v=function(){var e,t=localStorage.getItem("user.token");return t?{token:t,email:localStorage.getItem("user.email"),id:localStorage.getItem("user.id"),roles:null===(e=localStorage.getItem("user.roles"))||void 0===e?void 0:e.split(",")}:{}},g=a.a.createContext(null),k=a.a.createContext(null),w="USER_LOGIN",y="USER_LOGOUT",N=function(e,t){switch(t.type){case"USER_INIT":return v();case w:var r;return n=t.userToken,localStorage.setItem("user.token",n.token),localStorage.setItem("user.refreshToken",n.refreshToken),localStorage.setItem("user.id",n.user.id),localStorage.setItem("user.email",n.user.email),localStorage.setItem("user.verified",Boolean(n.user.verified).toString()),localStorage.setItem("user.roles",n.user.roles.map((function(e){return e.name})).toString()),{id:t.userToken.user.id,token:t.userToken.token,email:t.userToken.user.email,roles:null===(r=t.userToken.user.roles)||void 0===r?void 0:r.map((function(e){return e.name})),verified:Boolean(t.userToken.user.verified)};case y:return localStorage.removeItem("user.refreshToken"),localStorage.removeItem("user.token"),localStorage.removeItem("user.id"),localStorage.removeItem("user.verified"),localStorage.removeItem("user.roles"),{};default:throw new Error("Unhandled action type: ".concat(t.type))}var n};function S(e){var t=e.children,r=a.a.useReducer(N,v()),n=Object(u.a)(r,2),c=n[0],s=n[1];return Object(p.jsx)(g.Provider,{value:c,children:Object(p.jsx)(k.Provider,{value:s,children:t})})}function I(){var e=a.a.useContext(g);if(void 0===e)throw new Error("useCountState must be used within a UserProvider");return e}function T(){var e=a.a.useContext(k);if(void 0===e)throw new Error("useCountDispatch must be used within a UserProvider");return e}var E,C,U,R,P,_,$=function(e){return new RegExp(/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,15}/g).test(e)},L=function(e){var t=e.length;if(t<1)return{valid:!1,strong:0,name:"",variant:"danger"};if(t>=15)return{valid:!0,strong:100,name:"strong",variant:"success"};var r=/(?=.*[A-Z]){2,}/.test(e)?2:/(?=.*[A-Z])/.test(e)?1:0,n=/(?=.*[a-z]){2,}/.test(e)?2:/(?=.*[a-z])/.test(e)?1:0,a=/(?=.*[0-9]){2,}/.test(e)?2:/(?=.*[0-9])/.test(e)?1:0,c=r+n+a+(/(?=.*[!@#$%^&*]){2,}/.test(e)?2:/(?=.*[!@#$%^&*])/.test(e)?1:0),s=t>7&&n>0&&a>0||!1,o=c+t/4;return o>10&&(o=10),{valid:s,strong:10*o,name:c>6?"strong":c>4?"intermediate":s?"weak":"poor",variant:o>6?"success":s?"warning":"danger"}},D=r(184),M=function(e){var t=e.onPasswordChange,r=e.password,n=e.strongPassword;return Object(p.jsxs)(O.a.Group,{controlId:"formBasicPassword",children:[Object(p.jsx)(O.a.Label,{children:"Password"}),Object(p.jsx)(O.a.Control,{type:"password",placeholder:"Password",onChange:t,value:r,isInvalid:!n.valid}),Object(p.jsx)(O.a.Text,{children:"Make sure it's at least 15 characters OR at least 8 characters including a number and a lowercase letter"}),Object(p.jsx)(D.a,{now:n.strong,label:n.name,variant:n.variant})]})},A=Object(h.a)(E||(E=Object(b.a)(["\n  mutation register($email: String!, $pass: String!) {\n    register_v1(email: $email, password: $pass) {\n      refreshToken\n      token\n      user {\n        roles{name}\n        id,\n        email,\n        verified\n      }\n    }\n  }\n"]))),F=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(""),s=Object(u.a)(c,2),l=s[0],b=s[1],h=Object(n.useState)(""),v=Object(u.a)(h,2),g=v[0],k=v[1],y=Object(i.g)(),N=T(),S=Object(m.useMutation)(A,{errorPolicy:"none"}),I=Object(u.a)(S,2),E=I[0],C=I[1],U=C.loading,R=C.data,P=(C.error,Object(n.useState)(!1)),_=Object(u.a)(P,2),D=_[0],F=_[1],q=Object(n.useState)(!1),B=Object(u.a)(q,2),Y=B[0],z=B[1],Q=Object(n.useState)(L("")),G=Object(u.a)(Q,2),H=G[0],W=G[1],J=Object(n.useState)(!1),V=Object(u.a)(J,2),Z=V[0],X=V[1],K=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($(r)){e.next=2;break}return e.abrupt("return",F(!0));case 2:if(l===g){e.next=5;break}return X(!0),e.abrupt("return");case 5:return e.prev=5,e.next=8,E({variables:{email:r,pass:l}});case 8:t=e.sent,n=t.data,N({type:w,userToken:n.register_v1}),y.push("/user/projects"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),console.log("onError",R),z(!0);case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("section",{id:"subheader","data-bgimage":"url(images/background/5.png) bottom",children:Object(p.jsx)("div",{className:"center-y relative text-center","data-scroll-speed":"4",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(p.jsxs)("form",{action:"blank.php",className:"row",id:"form_subscribe",method:"post",name:"myForm",children:[Object(p.jsxs)("div",{className:"col-md-12 text-center",children:[Object(p.jsx)("h1",{children:"User Registration"}),Object(p.jsx)("p",{children:"All big things starting here"})]}),Object(p.jsx)("div",{className:"clearfix"})]})})})})})}),Object(p.jsx)("section",{className:"no-top","data-bgimage":"url(images/background/3.png) top",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(p.jsxs)("form",{name:"contactForm",id:"contact_form",className:"form-border",method:"post",action:"blank.php",children:[Object(p.jsxs)(O.a,{children:[D&&Object(p.jsx)(f.a,{variant:"danger",children:"Email is not in good shape..."}),Y&&Object(p.jsxs)(f.a,{variant:"danger",children:["Email is probably taken, did you ",Object(p.jsx)(o.b,{to:"/forgotten-password",children:"forgotten password"}),"?"]}),Z&&Object(p.jsx)(f.a,{variant:"danger",children:"The retyped password is not the same"}),Object(p.jsxs)(O.a.Group,{controlId:"formBasicEmail",children:[Object(p.jsx)(O.a.Label,{children:"Email address"}),Object(p.jsx)(O.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){a(e.target.value),F(!1),z(!1)},value:r,isInvalid:D}),Object(p.jsx)(O.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(p.jsx)(M,{password:l,onPasswordChange:function(e){var t=e.target.value;b(t),F(!1),W(L(t))},strongPassword:H}),Object(p.jsxs)(O.a.Group,{controlId:"formBasicPassword",children:[Object(p.jsx)(O.a.Label,{children:"Re-Password"}),Object(p.jsx)(O.a.Control,{type:"password",placeholder:"Retype Password",onChange:function(e){var t=e.target.value;k(t),F(!1),t==l&&X(!1)},value:g,isInvalid:Z})]})]}),Object(p.jsxs)("div",{id:"submit",className:"pull-left",children:[!U&&Object(p.jsx)(x.a,{className:"btn-round",variant:"primary",onClick:function(){return K()},children:"Register"}),U&&Object(p.jsx)(x.a,{className:"btn-round",variant:"primary",disabled:!0,children:"Loading..."}),Object(p.jsx)("div",{className:"clearfix"}),Object(p.jsx)("div",{className:"spacer-single"})]})]})})})})})]})},q=function(e){return new RegExp(/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,15}/g).test(e)},B=Object(h.a)(C||(C=Object(b.a)(["\n  mutation Login($email: String!, $pass: String!) {\n    login_v1(email: $email, password:$pass) {\n      token,\n      refreshToken,\n      user {\n        id\n        email,\n        verified,\n        roles {\n          name\n        }\n    }\n    } \n}\n"]))),Y=function(){var e=Object(n.useState)(localStorage.getItem("user.email")||""),t=Object(u.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(""),s=Object(u.a)(c,2),l=s[0],b=s[1],h=Object(n.useState)(!1),v=Object(u.a)(h,2),g=v[0],k=v[1],y=Object(n.useState)(!1),N=Object(u.a)(y,2),S=N[0],I=N[1],E=Object(i.g)(),C=new URLSearchParams(E.location.search),U=C.get("path"),R=C.get("role"),P=T(),_=Object(m.useMutation)(B,{errorPolicy:"none"}),$=Object(u.a)(_,2),L=$[0],D=$[1],M=D.loading,A=(D.data,D.error,function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q(r)){e.next=2;break}return e.abrupt("return",k(!0));case 2:return e.prev=2,e.next=5,L({variables:{email:r,pass:l}});case 5:t=e.sent,n=t.data,P({type:w,userToken:n.login_v1}),E.replace(U||"/user/dashboard"),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),k(!0),I(!0),b("");case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}()),F=function(){E.goBack()};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("section",{id:"subheader","data-bgimage":"url(images/background/5.png) bottom",children:Object(p.jsx)("div",{className:"center-y relative text-center","data-scroll-speed":"4",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(p.jsxs)("form",{action:"blank.php",className:"row",id:"form_subscribe",method:"post",name:"myForm",children:[Object(p.jsxs)("div",{className:"col-md-12 text-center",children:[Object(p.jsx)("h1",{children:"User Login"}),Object(p.jsx)("p",{children:"We was missed you already"}),R&&Object(p.jsxs)(f.a,{variant:"warning",children:["You trying to reach part what is under registered user with ",Object(p.jsx)("b",{children:R})," role protection. ",Object(p.jsx)(o.b,{to:"/",onClick:F,children:"Please take me back"})]}),!R&&U&&Object(p.jsxs)(f.a,{variant:"warning",children:["You trying to reach part what is under registered user protection. ",Object(p.jsx)(o.b,{to:"/",onClick:F,children:"Please take me back"})]})]}),Object(p.jsx)("div",{className:"clearfix"})]})})})})})}),Object(p.jsx)("section",{className:"no-top","data-bgimage":"url(images/background/3.png) top",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(p.jsxs)(O.a,{name:"contactForm",id:"contact_form",className:"form-border",children:[!S&&Object(p.jsx)("h3",{children:"Login to your account"}),S&&Object(p.jsxs)(f.a,{variant:"danger",children:["Email or password is not valid. Did You ",Object(p.jsx)(o.b,{to:"/forgotten-password",children:"forgotten your password"}),"?"]}),g&&Object(p.jsx)(f.a,{variant:"danger",children:"Email is not in good shape..."}),Object(p.jsxs)(O.a.Group,{controlId:"formBasicEmail",children:[Object(p.jsx)(O.a.Label,{children:"Email address"}),Object(p.jsx)(O.a.Control,{type:"text",placeholder:"Enter email",onChange:function(e){a(e.target.value),k(!1),I(!1)},value:r,isInvalid:g})]}),Object(p.jsxs)(O.a.Group,{controlId:"formBasicPassword",children:[Object(p.jsx)(O.a.Label,{children:"Password"}),Object(p.jsx)(O.a.Control,{type:"password",onChange:function(e){b(e.target.value),k(!1),I(!1)},value:l,isInvalid:S}),Object(p.jsx)(O.a.Text,{className:"text-muted",children:"We'll never share your password with anyone else."})]}),Object(p.jsxs)("div",{id:"submit",className:"pull-left",children:[!M&&Object(p.jsx)(x.a,{className:"btn-round",variant:"primary",onClick:function(){return A()},children:"Login"}),M&&Object(p.jsx)(x.a,{className:"btn-round",variant:"primary",disabled:!0,children:"Loading..."}),Object(p.jsx)("div",{className:"clearfix"}),Object(p.jsx)("div",{className:"spacer-single"}),Object(p.jsxs)("ul",{className:"list s3",children:[Object(p.jsx)("li",{children:"Or login with:"}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{href:"".concat("https://protectql.com/client/60265a2cb6499e6be69b13b6/project/6087b07bb8d6500dadff5474/graphql","/auth/github"),children:"GitHub"})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{href:"".concat("https://protectql.com/client/60265a2cb6499e6be69b13b6/project/6087b07bb8d6500dadff5474/graphql","/auth/facebook"),children:"Facebook"})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{href:"".concat("https://protectql.com/client/60265a2cb6499e6be69b13b6/project/6087b07bb8d6500dadff5474/graphql","/auth/google"),children:"Google"})})]})]})]})})})})})]})},z=Object(h.a)(U||(U=Object(b.a)(["\n  mutation forgottenPassword($email: String!) {\n    forgottenPassword_v1(email: $email) {\n      email,\n      status\n    }\n  }\n"]))),Q=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(!1),s=Object(u.a)(c,2),o=s[0],l=s[1],b=Object(n.useState)(!1),h=Object(u.a)(b,2),v=h[0],g=h[1],k=(Object(i.g)(),T(),Object(m.useMutation)(z,{errorPolicy:"none"})),w=Object(u.a)(k,2),y=(w[0],w[1]),N=(y.loading,y.data,y.error,Object(m.useMutation)(z,{errorPolicy:"none"})),S=Object(u.a)(N,2),I=S[0],E=S[1],C=E.loading,U=E.data,R=(E.error,function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g(!1),!r||!$(r)){e.next=17;break}return l(!1),e.prev=3,e.next=6,I({variables:{email:r}});case 6:t=e.sent,t.data,g(!0),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("onError",U),l(!0);case 15:e.next=18;break;case 17:l(!0);case 18:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}());return v?Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(f.a,{variant:"success",children:["We sent to You instruction to email ",r,". Check your mailbox (don't forget check spam as well)"]})}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("section",{id:"subheader","data-bgimage":"url(images/background/5.png) bottom",children:Object(p.jsx)("div",{className:"center-y relative text-center","data-scroll-speed":"4",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(p.jsxs)("form",{action:"blank.php",className:"row",id:"form_subscribe",method:"post",name:"myForm",children:[Object(p.jsxs)("div",{className:"col-md-12 text-center",children:[Object(p.jsx)("h1",{children:"Forgotten Password"}),Object(p.jsx)("p",{children:"Shortly You will be back"})]}),Object(p.jsx)("div",{className:"clearfix"})]})})})})})}),Object(p.jsx)("section",{className:"no-top","data-bgimage":"url(images/background/3.png) top",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(p.jsxs)("form",{name:"contactForm",id:"contact_form",className:"form-border",method:"post",action:"blank.php",children:[Object(p.jsx)(O.a,{children:Object(p.jsxs)(O.a.Group,{controlId:"formBasicEmail",children:[Object(p.jsx)(O.a.Label,{children:"Email address"}),Object(p.jsx)(O.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){a(e.target.value),l(!1)},value:r,isInvalid:o}),Object(p.jsx)(O.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]})}),Object(p.jsxs)("div",{id:"submit",className:"pull-left",children:[!C&&Object(p.jsx)(x.a,{className:"btn-round",variant:"primary",onClick:function(){return R()},children:"Send Recovery Link"}),C&&Object(p.jsx)(x.a,{className:"btn-round",variant:"primary",disabled:!0,children:"Loading..."}),Object(p.jsx)("div",{className:"clearfix"})]})]})})})})})]})},G=r(50),H=r.n(G),W=Object(h.a)(R||(R=Object(b.a)(["\n  mutation forgottenPasswordCheck($token: String!) {\n    check: forgottenPasswordCheck_v1(token: $token) {\n      status\n    }\n  }\n"]))),J=Object(h.a)(P||(P=Object(b.a)(["\n  mutation forgottenPasswordReset($token: String!, $password: String!) {\n    reset: forgottenPasswordReset_v1(token: $token, password: $password) {\n      refreshToken\n      token\n      user {\n        roles{name}\n        id,\n        email,\n        verified\n      }\n    }\n  }\n"]))),V=function(e){var t=e.match,r=H.a.get(t,"params.token"),a=Object(n.useState)(""),c=Object(u.a)(a,2),s=c[0],o=c[1],l=Object(n.useState)(""),b=Object(u.a)(l,2),h=b[0],v=b[1],g=Object(i.g)(),k=T(),y=Object(m.useMutation)(W,{errorPolicy:"none"}),N=Object(u.a)(y,2),S=N[0],I=N[1],E=I.loading,C=I.data,U=(I.error,Object(m.useMutation)(J,{errorPolicy:"none"})),R=Object(u.a)(U,2),P=R[0],_=R[1],$=_.loading,D=_.data,A=(_.error,Object(n.useState)(!1)),F=Object(u.a)(A,2),q=(F[0],F[1]),B=Object(n.useState)(L("")),Y=Object(u.a)(B,2),z=Y[0],Q=Y[1],G=Object(n.useState)(!1),V=Object(u.a)(G,2),Z=(V[0],V[1],Object(n.useState)(!1)),X=Object(u.a)(Z,2),K=X[0],ee=X[1];Object(n.useEffect)((function(){(function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S({variables:{token:r}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:return e.prev=7,e.finish(7);case 9:case"end":return e.stop()}}),e,null,[[0,5,7,9]])})));return function(){return e.apply(this,arguments)}})()()}),[r,S]);var te=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z.valid){e.next=2;break}return e.abrupt("return");case 2:if(s===h){e.next=5;break}return ee(!0),e.abrupt("return");case 5:return e.prev=5,e.next=8,P({variables:{token:r,password:s}});case 8:t=e.sent,n=t.data,k({type:w,userToken:n.reset}),g.replace("/user/projects"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),console.log("onError",D);case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(){return e.apply(this,arguments)}}();return E?Object(p.jsx)(f.a,{variant:"success",children:"Checking token"}):C&&C.check&&"valid"===C.check.status?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("section",{id:"subheader","data-bgimage":"url(images/background/5.png) bottom",children:Object(p.jsx)("div",{className:"center-y relative text-center","data-scroll-speed":"4",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(p.jsxs)("form",{action:"blank.php",className:"row",id:"form_subscribe",method:"post",name:"myForm",children:[Object(p.jsxs)("div",{className:"col-md-12 text-center",children:[Object(p.jsx)("h1",{children:"User Password Reset"}),Object(p.jsx)("p",{children:"You will be back soon"})]}),Object(p.jsx)("div",{className:"clearfix"})]})})})})})}),Object(p.jsx)("section",{className:"no-top","data-bgimage":"url(images/background/3.png) top",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(p.jsxs)("form",{name:"contactForm",id:"contact_form",className:"form-border",method:"post",action:"blank.php",children:[Object(p.jsxs)(O.a,{children:[K&&Object(p.jsx)(f.a,{variant:"danger",children:"The retyped password is not the same"}),Object(p.jsx)(M,{password:s,onPasswordChange:function(e){var t=e.target.value;o(t);var r=function(e){return/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,16}$/.test(e)}(t);q(!r),Q(L(t))},strongPassword:z}),Object(p.jsxs)(O.a.Group,{controlId:"formBasicPassword",children:[Object(p.jsx)(O.a.Label,{children:"Re-Password"}),Object(p.jsx)(O.a.Control,{type:"password",placeholder:"Retype Password",onChange:function(e){var t=e.target.value;v(t),q(!1),t==s&&ee(!1)},value:h,isInvalid:K})]})]}),Object(p.jsxs)("div",{id:"submit",className:"pull-left",children:[!$&&Object(p.jsx)(x.a,{className:"btn-round",variant:"primary",onClick:function(){return te()},disabled:!z.valid,children:"Reset password"}),$&&Object(p.jsx)(x.a,{className:"btn-round",variant:"primary",disabled:!0,children:"Loading..."}),Object(p.jsx)("div",{className:"clearfix"})]})]})})})})})]}):Object(p.jsxs)(f.a,{variant:"danger",children:["The ",Object(p.jsx)("b",{children:r})," is not valid or already used"]})},Z=Object(h.a)(_||(_=Object(b.a)(["\n  mutation verifyEmail($verifyToken: String!) {\n    verifyEmail_v1(verifyToken: $verifyToken) {\n      refreshToken\n      token\n      user {\n        roles{name}\n        id,\n        email,\n        verified\n      }\n    }\n  }\n"]))),X=function(e){var t=e.match,r=G.get(t,"params.verifyToken"),a=Object(n.useState)(!1),c=Object(u.a)(a,2),s=c[0],o=c[1],l=Object(i.g)(),b=T(),h=Object(m.useMutation)(Z,{errorPolicy:"none"}),O=Object(u.a)(h,2),f=O[0],v=O[1],g=v.loading,k=v.data,y=v.error,N=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f({variables:{verifyToken:r}});case 3:t=e.sent,n=t.data,b({type:w,userToken:n.verifyEmail_v1}),o(!0),localStorage.setItem("user.verifyToken",r),setTimeout((function(){l.replace("/user/projects")}),2e3),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("onError",k);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){r&&function(){var e=localStorage.getItem("user.verifyToken");"true"==localStorage.getItem("user.verified")&&e==r?l.replace("/user/projects"):N()}()}),[r]),Object(p.jsx)("section",{children:Object(p.jsx)("div",{className:"center-y relative text-center","data-scroll-speed":"4",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-md-8 offset-md-2",children:[s?Object(p.jsxs)("div",{className:"alert alert-success",role:"alert",children:["Your account was verified ",Object(p.jsx)(x.a,{children:"Start creating"})]}):null,g?Object(p.jsx)("div",{className:"alert alert-dark",role:"alert",children:"Your accont is verifing..."}):null,!r||y?Object(p.jsx)("div",{className:"alert alert-dark",role:"alert",children:"The code is invalid or already applyed"}):null]})})})})})},K=r(81),ee=r.n(K),te=function(){var e=Object(j.a)(d.a.mark((function e(t,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee.a.get("".concat("https://protectql.com/client/60265a2cb6499e6be69b13b6/project/6087b07bb8d6500dadff5474/graphql","/auth/").concat(t,"/callback?code=").concat(r)));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),re=function(e){var t=e.type,r=Object(i.h)(),a=H.a.get(r,"search","").split("?code="),c=a.length>1?a[1]:"",s=Object(i.g)(),l=T(),b=Object(n.useState)(),h=Object(u.a)(b,2),m=h[0],O=h[1],x=function(e){O(e),setTimeout((function(){s.replace("/login")}),4e3)};return Object(n.useEffect)((function(){c?function(){var e=Object(j.a)(d.a.mark((function e(){var r,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te(t,c);case 3:r=e.sent,l({type:w,userToken:r.data}),s.replace("/user/projects"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),a=JSON.parse(H.a.get(e.t0,"request.response","{}")),x((null===(n=a.error)||void 0===n?void 0:n.message)||e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()():x("User denied")}),[r]),Object(p.jsx)(p.Fragment,{children:m&&Object(p.jsxs)(f.a,{variant:"danger",children:[t," login isn't work due \"",m,'" You will be redirect back to ',Object(p.jsx)(o.b,{to:"/login",children:"Login"})]})})},ne=r.p+"static/media/logo.b2e5a01e.svg";r(168);var ae=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)("header",{className:"App-header",children:[Object(p.jsx)("img",{src:ne,className:"App-logo",alt:"logo"}),Object(p.jsxs)("p",{children:["This page is public and accesible for all visitors / users Edit ",Object(p.jsx)("code",{children:"src/containers/public/Home/Home.tsx"})," and save to reload."]}),Object(p.jsxs)("span",{children:[Object(p.jsx)("span",{children:"Learn "}),Object(p.jsx)("a",{className:"App-link",href:"https://reactjs.org/",target:"_blank",rel:"noopener noreferrer",children:"React"}),Object(p.jsx)("span",{children:", "}),Object(p.jsx)("a",{className:"App-link",href:"https://redux.js.org/",target:"_blank",rel:"noopener noreferrer",children:"Redux"}),Object(p.jsx)("span",{children:", "}),Object(p.jsx)("a",{className:"App-link",href:"https://redux-toolkit.js.org/",target:"_blank",rel:"noopener noreferrer",children:"Redux Toolkit"}),",",Object(p.jsx)("span",{children:" and "}),Object(p.jsx)("a",{className:"App-link",href:"https://react-redux.js.org/",target:"_blank",rel:"noopener noreferrer",children:"React Redux"})]})]})})},ce=r(17),se=function(e){e.user;var t=e.onLogout;return Object(p.jsx)("div",{className:"header-light transparent scroll-light container",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsxs)("div",{className:"col-md-2",children:[Object(p.jsxs)(ce.a,{children:[Object(p.jsx)(ce.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"Menu"}),Object(p.jsx)(ce.a.Menu,{children:Object(p.jsx)(ce.a.Item,{href:"/",children:"Home"})})]}),Object(p.jsxs)(ce.a,{children:[Object(p.jsx)(ce.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"Admin"}),Object(p.jsxs)(ce.a.Menu,{children:[Object(p.jsx)(ce.a.Item,{href:"/admin/users",children:"Users"}),Object(p.jsx)(ce.a.Item,{href:"/admin/roles",children:"Roles"})]})]})]}),Object(p.jsx)("div",{className:"header-text col-md-8",children:Object(p.jsx)("div",{children:"This Header only for loged user with admin role"})}),Object(p.jsx)("div",{className:"col-md-2",children:Object(p.jsxs)(ce.a,{children:[Object(p.jsx)(ce.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"User"}),Object(p.jsxs)(ce.a.Menu,{children:[Object(p.jsx)(ce.a.Item,{href:"/",children:Object(p.jsx)(o.b,{to:"/user/dashboard",children:"User Dashboard"})}),Object(p.jsx)(ce.a.Item,{href:"/",children:Object(p.jsx)(o.b,{className:"",to:"/",onClick:t,children:"Logout"})})]})]})})]})})},oe=(r(170),function(){return Object(p.jsx)("div",{className:"header-light transparent scroll-light container",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-md-2",children:Object(p.jsxs)(ce.a,{children:[Object(p.jsx)(ce.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"Menu"}),Object(p.jsx)(ce.a.Menu,{children:Object(p.jsx)(ce.a.Item,{href:"/",children:"Home"})})]})}),Object(p.jsx)("div",{className:"header-text col-md-8",children:Object(p.jsx)("div",{children:"This is public Header"})}),Object(p.jsxs)("div",{className:"col-md-2",children:[Object(p.jsx)(o.b,{className:"",to:"/login",children:"Login"})," or ",Object(p.jsx)(o.b,{className:"",to:"/register",children:"Register"})]})]})})}),ie=function(e){e.user;var t=e.onLogout;return Object(p.jsx)("div",{className:"header-light transparent scroll-light container",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-md-2",children:Object(p.jsxs)(ce.a,{children:[Object(p.jsx)(ce.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"Menu"}),Object(p.jsx)(ce.a.Menu,{children:Object(p.jsx)(ce.a.Item,{href:"/",children:"Home"})})]})}),Object(p.jsx)("div",{className:"header-text col-md-8",children:Object(p.jsx)("div",{children:"This Header only for anybody who is logged in"})}),Object(p.jsx)("div",{className:"col-md-2",children:Object(p.jsxs)(ce.a,{children:[Object(p.jsx)(ce.a.Toggle,{variant:"normal",id:"dropdown-basic",children:"User"}),Object(p.jsxs)(ce.a.Menu,{children:[Object(p.jsx)(ce.a.Item,{href:"/",children:Object(p.jsx)(o.b,{to:"/user/dashboard",children:"User Dashboard"})}),Object(p.jsx)(ce.a.Item,{href:"/",children:Object(p.jsx)(o.b,{className:"",to:"/",onClick:t,children:"Logout"})})]})]})})]})})},le=function(){var e=I(),t=T(),r=function(){t({type:y})};return e&&e.token?-1!==e.roles.indexOf("admin")?Object(p.jsx)(se,{user:e,onLogout:r}):Object(p.jsx)(ie,{user:e,onLogout:r}):Object(p.jsx)(oe,{})};var de,je,ue,be,he,me,Oe,fe,xe,pe=function(){return Object(p.jsx)("div",{children:Object(p.jsx)("h2",{children:"User Dashboard"})})},ve=function(e){var t=e.path,r=e.role,n=e.children,a=I();return r&&-1===a.roles.indexOf(r)?Object(p.jsx)(i.a,{to:"/login?path=".concat(t,"&role=").concat(r)}):a.token?Object(p.jsx)(p.Fragment,{children:n}):Object(p.jsx)(i.a,{to:"/login?path=".concat(t)})},ge=r(128),ke=r(179),we=(r(119),function(e){var t=e.item,r=e.field,n=function(e,t){var r=t,n=r.name?r.name.split("."):t.split(".");return{element:e[n[0]],name:n[0],names:n}}(t,r),a=n.element,c=n.name,s=n.names;if(!a)return Object(p.jsxs)(p.Fragment,{children:["ERR NOT EXIST:",c]});if(r.component){var o=r.component;return Object(p.jsx)(p.Fragment,{children:o&&o({value:a,names:s,item:t})})}return a.substr&&a.length>50?Object(p.jsxs)(p.Fragment,{children:[a.substr(0,47),"..."]}):a.push&&a.reduce&&s.length>1?Object(p.jsx)(p.Fragment,{children:a.reduce((function(e,t){return e+t[s[1]]}),"")}):Object(p.jsx)(p.Fragment,{children:a})}),ye=function(e){var t=e.item,r=e.onDelete,n=e.name,a=e.fields,c=void 0===a?["id"]:a,s=e.showDelete,i=void 0!==s&&s;return Object(p.jsxs)("tr",{className:"row1",children:[Object(p.jsx)("td",{className:"id",children:Object(p.jsx)(o.b,{to:"/user/".concat(n.toLowerCase(),"/").concat(t.id),children:t.id})}),c.map((function(e){return"id"!==e&&Object(p.jsx)("td",{children:Object(p.jsx)(we,{item:t,field:e})})})),t.user&&Object(p.jsx)("td",{children:t.user.email}),i&&Object(p.jsx)("td",{className:"right",children:Object(p.jsx)(x.a,{variant:"danger",size:"sm",onClick:function(){r(t)},children:"delete"})})]})},Ne=function(e){var t=e.what,r=void 0===t?"":t;return Object(p.jsx)("div",{children:"Loading ".concat(r,"... ")})},Se=r(182),Ie=function(e){var t=e.show,r=e.onHide,n=e.onDelete,a=e.category,c=e.deleteObject,s=e.deleting;return Object(p.jsx)("div",{children:Object(p.jsxs)(Se.a,{show:t,onHide:r,children:[Object(p.jsx)(Se.a.Header,{closeButton:!0,children:Object(p.jsx)("div",{children:Object(p.jsxs)(Se.a.Title,{children:["Delete ",">>"," ",c&&c.name,"  ","<<"]})})}),Object(p.jsx)(Se.a.Body,{children:s?Object(p.jsxs)("p",{children:["Deleting ",a," item with name '",c&&c.name,"' and id '",c&&c.id,"' ..."]}):Object(p.jsxs)("p",{children:["Are you sure, you want delete ",a," item with name ",Object(p.jsxs)("b",{children:["'",c&&c.name,"'"]})," and id ",Object(p.jsxs)("i",{children:["'",c&&c.id,"'"]})]})}),Object(p.jsxs)(Se.a.Footer,{children:[Object(p.jsx)(x.a,{disabled:s,variant:"danger",type:"submit",onClick:function(){s||n(c)},children:"Delete"}),Object(p.jsx)(x.a,{disabled:s,variant:"primary",onClick:r,children:"Close"})]})]})})},Te=function(e){var t=e.where,r=void 0===t?"":t;return Object(p.jsx)(f.a,{variant:"danger",children:"Unauthorized ".concat(r," access")})},Ee=function(e){var t=e.filter,r=e.name,a=e.adminMode,c=void 0!==a&&a,s=e.queries,o=e.fields,i=Object(n.useState)(!1),l=Object(u.a)(i,2),d=l[0],j=l[1],b=Object(n.useState)(!1),h=Object(u.a)(b,2),O=(h[0],h[1],Object(n.useState)(null)),f=Object(u.a)(O,2),x=f[0],v=f[1],g=Object(n.useState)(!1),k=Object(u.a)(g,2),w=k[0],y=k[1],N=Object(n.useState)(!1),S=Object(u.a)(N,2),I=S[0],T=S[1],E=Object(n.useState)(!0),C=Object(u.a)(E,2),U=(C[0],C[1]),R=Object(n.useState)([]),P=Object(u.a)(R,2),_=P[0],$=P[1],L=Object(n.useState)(),D=Object(u.a)(L,2),M=D[0],A=D[1],F=Object(m.useQuery)(c?s.ADMIN_LIST_QUERY:s.USER_LIST_QUERY,{onError:function(e){console.log("onError >>> ",e.message),"GraphQL error: Unauhorized"==e.message?j(!0):A(e)},onCompleted:function(e){console.log("user: onCompleted",e),U(!1);var t=Object.getOwnPropertyNames(e);t.length>0&&e[t[0]].length>0?$(e[t[0]]):$([])},variables:{filter:t}}),q=F.refetch,B=F.loading,Y=Object(m.useMutation)(s.DELETE_MUTATION,{errorPolicy:"none",onCompleted:function(e){console.log("DELETE",e.deleteProject),H(),q()},onError:function(e){console.log("onError >>> ",e.message),"GraphQL error: Unauhorized"==e.message&&j(!0)}}),z=Object(u.a)(Y,2),Q=z[0],G=z[1],H=(G.loading,G.error,function(){y(!1),v(null)}),W=function(e){T(!1),y(!0),v(e)};return d?Object(p.jsx)(Te,{where:"projects"}):B?Object(p.jsx)(Ne,{what:"projects"}):Object(p.jsxs)("div",{children:[M&&Object(p.jsx)("div",{children:"Error! ".concat(M.message)}),Object(p.jsxs)(ke.a,{responsive:!0,children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Id"}),null===o||void 0===o?void 0:o.map((function(e){return"id"!==e&&Object(p.jsx)("th",{children:e.name?e.name:e})})),c&&Object(p.jsx)("th",{children:"User"}),Object(p.jsx)("th",{})]})}),Object(p.jsx)("tbody",{children:_.length&&_.map((function(e){return Object(p.jsx)(ye,{name:r,item:e,onDelete:W,fields:o,showDelete:c})}))})]}),Object(p.jsx)(Ie,{show:w,onHide:H,onDelete:function(e){T(!0),Q({variables:{id:e.id}})},category:"project",deleteObject:x,deleting:I})]})},Ce=r(180),Ue=r(181),Re=(r(171),{contains:"contains",not_contains:"not contains",starts_with:"starts with",not_starts_with:"not starts with",ends_with:"ends with",not_ends_with:"not ends with",isEmpty:"is empty"}),Pe=function(e){var t=e.fields,r=e.onChange,a=Object(n.useState)(t[0]),c=Object(u.a)(a,2),s=c[0],o=c[1],i=Object(n.useState)("contains"),l=Object(u.a)(i,2),d=l[0],j=l[1],b=Object(n.useState)(""),h=Object(u.a)(b,2),m=h[0],f=h[1],x=Object(n.useState)("null"),v=Object(u.a)(x,2),g=v[0],k=v[1],w=Object(n.useCallback)((function(e){g!=e&&(console.log("useFilter>>>",e),k(e),r(e))}),[g,r,k]),y=Object(n.useCallback)((function(e,t,r){if(r||"isEmpty"==t){var n={};n["".concat(e,"_").concat(t)]=r,w(n)}else w(null)}),[w]),N=function(e){var t=e;return function(){var e;e=t,console.log("onFieldChange",e),o(e),y(e,d,m)}},S=function(e){var t=e;return function(){var e;e=t,console.log("onOptionChange",e),j(e),y(s,e,m)}};return Object(p.jsxs)(Ce.a,{className:"mb-3",children:[Object(p.jsx)(Ue.a,{className:"field-option",as:Ce.a.Prepend,variant:"success",title:s,id:"input-group-dropdown-0",children:t.map((function(e){return Object(p.jsx)(ce.a.Item,{onClick:N(e),children:e.toString()},e)}))}),Object(p.jsx)(Ue.a,{className:"select-option",as:Ce.a.Prepend,variant:"outline-link",title:Re[d],id:"input-group-dropdown-1",children:Object.getOwnPropertyNames(Re).map((function(e){return Object(p.jsx)(ce.a.Item,{onClick:S(e),children:Re[e]},e)}))}),Object(p.jsx)(O.a.Control,{value:m,onChange:function(e){var t=e.target.value;console.log("onFilterChange",e,t),f(t),y(s,d,t)}})]})},_e=(r(172),function(){var e=[];return e.name="AND",{AND:e}}),$e=function(e,t){var r=t;"AND"!=e.name&&((r=[r]).name="AND"),e.push(r)},Le=function e(t){var r,n="",a=Object(ge.a)(t);try{for(a.s();!(r=a.n()).done;){var c=r.value;c.name&&c.length>0?n+=",".concat(e(c)):n+=",{".concat(c.filter,"}")}}catch(s){a.e(s)}finally{a.f()}return"{".concat(t.name,":[").concat(n.substr(1),"]}")},De=function(e){var t={filter:"",params:""};return t.filter=e.AND.length>0?"(filter: ".concat(Le(e.AND),")"):"",t.params=t.params.length>2?"(".concat(t.params.substr(1),")"):"",t},Me=function(e){var t=e.name,r=e.userId,a=e.adminMode,c=void 0!==a&&a,s=e.queries,o=e.fields,l=Object(n.useState)(c?_e():null),d=Object(u.a)(l,2),j=d[0],b=d[1],h=Object(i.g)(),m=function(e){var t=_e();return e&&$e(t.AND,{user_every:{id:e}}),t},O=function(e){var t=De(e);console.log("processFilter",{filter:e,filterDestructed:t}),b(e)};Object(n.useEffect)((function(){var e=m(r);O(e)}),[r]);var f=Object(n.useCallback)((function(e){var t=m(r);e&&$e(t.AND,e),O(t)}),[r]);return c||j?Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("section",{children:[Object(p.jsx)("h1",{children:t}),Object(p.jsxs)("div",{className:"row-head",children:[Object(p.jsx)(Pe,{fields:o,onChange:f}),Object(p.jsx)("div",{})]}),Object(p.jsxs)("div",{className:"row-table",children:[Object(p.jsx)(Ee,{name:t,filter:j,queries:s,adminMode:c,fields:o}),Object(p.jsx)(x.a,{onClick:function(){h.push("/user/"+t.toLowerCase()+"/create")},children:"Create New"})]})]})}):null},Ae=r(39),Fe=(r(122),function(e){return e[Object.keys(e)[0]]}),qe=function(e){var t=e.value,r=e.names,a=e.gql,c=e.item,s=t,o=r.length>1&&r[1],i=s.push&&s.reduce&&r.length>1?s.reduce((function(e,t){return e+", ".concat(t[o])}),"").substr(2):s,l=Object(n.useState)(i),d=Object(u.a)(l,2),j=d[0],b=d[1],h=Object(n.useState)([]),f=Object(u.a)(h,2),x=f[0],v=f[1],g=Object(m.useQuery)(a.QUERY,{onError:function(e){console.log("ConnectBase:onError >>> ",e.message),e.message},onCompleted:function(e){console.log("user: onCompleted",e);var t=Object.getOwnPropertyNames(e);if(t.length>0&&e[t[0]].length>0){var r=e[t[0]].map((function(e){return{id:e.id,checked:-1!==j.indexOf(e[o]),label:e[o]}}));v(r)}else v([])}}),k=(g.refetch,g.loading,Object(m.useMutation)(a.ADD,{errorPolicy:"none",onCompleted:function(e){var t=Fe(e);console.log("ADDED",e,t.id)},onError:function(){}})),w=Object(u.a)(k,2),y=w[0],N=w[1],S=(N.loading,N.data,N.error,Object(m.useMutation)(a.REMOVE,{errorPolicy:"none",onCompleted:function(e){var t=Fe(e);console.log("REMOVE",e,t.id)},onError:function(){}})),I=Object(u.a)(S,2),T=I[0],E=I[1];E.loading,E.data,E.error;return Object(p.jsx)(Ue.a,{id:"dropdown-basic-button",title:j,children:x&&x.map((function(e){return Object(p.jsx)(ce.a.Item,{onClick:function(t){return function(e){var t=x.map((function(t){return t.label===e.label&&(t.checked=!t.checked),Object(Ae.a)({},t)})),r=t.reduce((function(e,t){return t.checked?"".concat(e,", ").concat(t.label):e}),"").substr(1);console.log("onChecked:",{updated:t,value:e,updateTitle:r}),e.checked?y({variables:{id1:e.id,id2:c.id}}):T({variables:{id1:e.id,id2:c.id}}),v(t),b(r)}(e)},children:Object(p.jsx)(O.a.Check,{type:"checkbox",label:e.label,checked:e.checked})})}))})},Be=Object(h.a)(de||(de=Object(b.a)(["\n  query allUsers($filter: UserFilter){ allUsers(filter: $filter) {\n      id\n      name,\n      models\n    }}\n"]))),Ye=Object(h.a)(je||(je=Object(b.a)(["\n  query allUsers($filter: UserFilter){ allUsers(filter: $filter) {\n      id\n      email,\n      password,\n      roles {\n        id\n        name\n      }\n    }\n  }\n"]))),ze=Object(h.a)(ue||(ue=Object(b.a)(["\n  mutation deleteUser($id: ID!) {\n    deleteUser(id: $id) {\n      id\n    }\n  }\n"]))),Qe=Object(h.a)(be||(be=Object(b.a)(["\n  query allUserRoles{ allUserRoles {\n      id\n      name\n    }}\n"]))),Ge=Object(h.a)(he||(he=Object(b.a)(["\n  mutation addToRoleOnUser($id1: ID!, $id2: ID!) { addTo_RoleOnUser(rolesUserRoleId:$id1, usersUserId:$id2) {\n    rolesUserRole {\n      id\n    } usersUser {\n      id\n    }\n  }}\n"]))),He=Object(h.a)(me||(me=Object(b.a)(["\n  mutation removeFromRoleOnUser($id1: ID!, $id2: ID!) { removeFrom_RoleOnUser(rolesUserRoleId:$id1, usersUserId:$id2) {\n    rolesUserRole {\n      id\n    } usersUser {\n      id\n    }\n  }}\n"]))),We=function(e){var t=e.value,r=e.names,n=e.item,a={QUERY:Qe,ADD:Ge,REMOVE:He};return Object(p.jsx)(qe,{value:t,names:r,gql:a,item:n})},Je=function(e){var t=e.userId,r=e.adminMode,n=void 0!==r&&r;return Object(p.jsx)("div",{children:Object(p.jsx)(Me,{name:"Users",fields:["email","password",{name:"roles.name",component:We},"roles.id"],userId:t,adminMode:n,queries:{USER_LIST_QUERY:Be,ADMIN_LIST_QUERY:Ye,DELETE_MUTATION:ze}})})},Ve=Object(h.a)(Oe||(Oe=Object(b.a)(["\n  query allUsers($filter: UserFilter){ allUsers(filter: $filter) {\n      id\n      name,\n      models\n    }}\n"]))),Ze=Object(h.a)(fe||(fe=Object(b.a)(["\n  query allUserRoles($filter: UserRoleFilter) {\n  allUserRoles(filter: $filter) {\n      id,\n      name\n    }\n  }\n"]))),Xe=Object(h.a)(xe||(xe=Object(b.a)(["\n  mutation deleteUserRole($id: ID!) {\n    deleteUserRole(id: $id) {\n      id\n    }\n  }\n"]))),Ke=function(e){var t=e.userId,r=e.adminMode,n=void 0!==r&&r;return Object(p.jsx)("div",{children:Object(p.jsx)(Me,{name:"Roles",fields:["name"],userId:t,adminMode:n,queries:{USER_LIST_QUERY:Ve,ADMIN_LIST_QUERY:Ze,DELETE_MUTATION:Xe}})})};function et(){return Object(p.jsx)(o.a,{children:Object(p.jsxs)("div",{children:[Object(p.jsx)(le,{}),Object(p.jsxs)(i.d,{children:[Object(p.jsx)(i.b,{exact:!0,path:"/",children:Object(p.jsx)(ae,{})}),Object(p.jsx)(i.b,{exact:!0,path:"/login",children:Object(p.jsx)(Y,{})}),Object(p.jsx)(i.b,{path:"/login/facebook",children:Object(p.jsx)(re,{type:"facebook"})}),Object(p.jsx)(i.b,{path:"/login/github",children:Object(p.jsx)(re,{type:"github"})}),Object(p.jsx)(i.b,{path:"/login/google",children:Object(p.jsx)(re,{type:"google"})}),Object(p.jsx)(i.b,{path:"/register",children:Object(p.jsx)(F,{})}),Object(p.jsx)(i.b,{path:"/forgotten-password/:token",component:V}),Object(p.jsx)(i.b,{exact:!0,path:"/forgotten-password",children:Object(p.jsx)(Q,{})}),Object(p.jsx)(i.b,{path:"/verify-user/:verifyToken",component:X}),Object(p.jsx)(ve,{path:"/user/dashboard",children:Object(p.jsx)(pe,{})}),Object(p.jsx)(i.b,{path:"/user/info"}),Object(p.jsx)(ve,{path:"/admin/users",role:"admin",children:Object(p.jsx)(Je,{adminMode:!0})}),Object(p.jsx)(ve,{path:"/admin/roles",role:"admin",children:Object(p.jsx)(Ke,{adminMode:!0})})]})]})})}var tt=r(68);function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var nt=Object(tt.b)("counter/fetchCount",function(){var e=Object(j.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),at=Object(tt.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(nt.pending,(function(e){e.status="loading"})).addCase(nt.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),ct=at.actions,st=(ct.increment,ct.decrement,ct.incrementByAmount,at.reducer),ot=Object(tt.a)({reducer:{counter:st}}),it=r(132);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var lt=r(130),dt=r(131),jt=function(){var e=Object(j.a)(d.a.mark((function e(){var t,r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("user.id"),r=localStorage.getItem("user.token"),n=localStorage.getItem("user.refreshToken"),e.abrupt("return",ee.a.post("".concat("https://protectql.com/client/60265a2cb6499e6be69b13b6/project/6087b07bb8d6500dadff5474/graphql","/graphql"),{query:"\n            mutation refreshToken($userId: ID!, $token: String!, $refreshToken:String!){\n                refreshToken_v1(userId: $userId, token: $token, refreshToken:$refreshToken){\n                    token,\n                    refreshToken\n                }\n            }\n        ",variables:{userId:t,token:r,refreshToken:n}}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ut=new(r(133).a)({attempts:function(e,t,r){return!0},delay:function(e,t,r){return 1e3*e*Math.random()}}),bt=!1,ht=[],mt=function(e,t){var r;return bt?r=Object(m.fromPromise)(new Promise((function(e){ht.push((function(){return e()}))}))):(bt=!0,r=Object(m.fromPromise)(jt().then((function(r){var n=r.data.data.refreshToken_v1;localStorage.setItem("user.token",n.token),localStorage.setItem("user.refreshToken",n.refreshToken),ht.map((function(e){return e()})),ht=[];var a=t.getContext().headers;return t.setContext({headers:Object(Ae.a)(Object(Ae.a)({},a),{},{authorization:"Bearer ".concat(n.token)})}),e(t)})).catch((function(e){ht=[]})).finally((function(){bt=!1}))).filter((function(e){return Boolean(e)}))),r.flatMap((function(){return e(t)}))},Ot=Object(lt.a)((function(e,t){var r=t.headers,n=localStorage.getItem("user.token");return{headers:Object(Ae.a)(Object(Ae.a)({},r),{},{authorization:n?"Bearer ".concat(n):""})}})),ft=Object(m.createHttpLink)({uri:"https://protectql.com/client/60265a2cb6499e6be69b13b6/project/6087b07bb8d6500dadff5474/graphql"}),xt=Object(dt.a)((function(e){var t=e.graphQLErrors,r=e.networkError,n=e.operation,a=e.forward;if(t&&t.map((function(e){var t=e.message,r=e.locations,n=e.path;return console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(r,", Path: ").concat(n))})),t&&(null===t||void 0===t?void 0:t.length)>0&&"Unauthorized"==t[0].message)return mt(a,n);r&&console.log("[Network error]: ".concat(r))})),pt=new m.ApolloClient({link:m.ApolloLink.from([ut,xt,Ot,ft]),cache:new m.InMemoryCache,defaultOptions:{watchQuery:{errorPolicy:"none"},query:{errorPolicy:"none"},mutate:{errorPolicy:"all"}}});s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(it.a,{store:ot,children:Object(p.jsx)(m.ApolloProvider,{client:pt,children:Object(p.jsx)(S,{children:Object(p.jsx)(et,{})})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[173,1,2]]]);
//# sourceMappingURL=main.223136b6.chunk.js.map